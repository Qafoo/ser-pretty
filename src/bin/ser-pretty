#!/usr/bin/env php
<?php

namespace Qafoo\SerPretty;

require_once __DIR__ . '/../../vendor/autoload.php';

$parser = new Parser();
$writer = new Writer\SimpleTextWriter();

if (!empty($_SERVER['argv'][1])) {
    $contents = file_get_contents($_SERVER['argv'][1]);
} else {
    $contents = file_get_contents('php://stdin');
}

$node = $parser->parse($contents);
echo $writer->write($node) . "\n";
